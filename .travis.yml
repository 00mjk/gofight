sudo: false

language: go

go:
  - 1.3
  - 1.4
  - 1.5
  - 1.6
  - tip

env:
  global:
    secure: Pj2/aLfIHUGHH/jvv9182jBdJ5Xc2PPZvnHnFHnXcVEaYMFta5eh2aEG9VXn4dLR/d93faOqag+YCdB2lDH4ysZllDeDevenpu75P/eXTFJDMtCSGhvYbgzuRTYpvOHvNngs8lK5IVVgMN+uaxWExNvrE+ZtlGuNzFW40Qm1nFSUa45RSg96Cz+Uk0PgWMD/Rv04gy7p4CyFNA8BSWXwkDwiOER5NquYT9w+tB46nM91SlTofzqRMaaZ0WVWnj6dDIoLdpwLiae45wxjngzBc/gA9kDbgZm8xwe/7Gakf49/0jTL/dtQ7rNAMmFufRTHDKa9wj2j9MuI70f8anC8Qh7HpH/CvcvHMnu4G102tlDLOehgkViIj5p+wHn4nqvPrBwZwxkhKkiP3GEwabI7vyLXRfy8e77JlT3xw01nj4XpgtVnWIF2RoW5zCSbCaVBWCuTp+QjnMd0APc3C6x9nwCSPuSvP8skKJ+vbMk+pLmuyvwxrebxQHGNwuSzjYKK36/RTOWM9LtD+ezJ5EQQIh/NMaTBADkcBGFeV1ihFMRQMcvdZ74Lp5XDHZtxZ5IoowN1U4qD9zs9QHPtQDZbVCPnQ0bWgjwvPEgAu9wTCJXSUZyvrXTgDku1tcZhce+ksmVyaUDa6yGCWtL1dAoOly1z+I1sKw8HHLrt6ujKs98=

install:
  - go get -t -v ./...
  - go get golang.org/x/tools/cmd/cover
  - go get github.com/mattn/goveralls

script:
  - go test -v -covermode=count -coverprofile=coverage.out
  - $(go env GOPATH | awk 'BEGIN{FS=":"} {print $1}')/bin/goveralls -coverprofile=coverage.out
    -service=travis-ci -repotoken=$COVERALLS_TOKEN
